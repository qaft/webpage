<!DOCTYPE html>
<html lang="en">
  <head>
    <base href="./">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <meta name="description" content="QAFT - Control Panel">
    <meta name="author" content="Łukasz Holeczek">
    <meta name="keyword" content="Bootstrap,Admin,Template,Open,Source,jQuery,CSS,HTML,RWD,Dashboard">
    <title>QAFT</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="apple-touch-icon" sizes="57x57" href="assets/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="assets/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="assets/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="assets/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="assets/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="assets/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="assets/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="assets/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="assets/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="assets/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="assets/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="assets/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="assets/favicon/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    <!-- Main styles for this application-->
    <link href="css/style.css" rel="stylesheet">
    <!-- Global site tag (gtag.js) - Google Analytics-->
    <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-118965717-3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];

      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());
      // Shared ID
      gtag('config', 'UA-118965717-3');
      // Bootstrap ID
      gtag('config', 'UA-118965717-5');
    </script>
    <link href="vendors/@coreui/chartjs/css/coreui-chartjs.css" rel="stylesheet">
    <style>
      #mydiv {
        position: absolute;
        z-index: 4;
        text-align: center;
        top: 160px;
        left: 300px;
        display: none;
      }

      #mydivheader {
        background-image: url(assets/img/2ipust.png);
        background-repeat: no-repeat;
        z-index: 5;
        height: 55px;
        top: -52px;
        right: -30px;
        width: 400px;
        margin: 0 auto 30px;
        position: absolute;
        padding: 10px;
        cursor: move;
      }


      #mydivheader2 {
        background-image: url(assets/img/2ipsol.png);
        background-repeat: no-repeat;
        z-index: 22;
        height: 746px;
        top: 1px;
        right: 345px;
        width: 25px;
        /* margin: 0 auto 30px; */
        position: absolute;
        /* padding: 10px; */
        cursor: move;
      }

      #mydivheader3 {
        background-image: url(assets/img/2ipsag.png);
        background-repeat: no-repeat;
        z-index: 22;
        height: 746px;
        top: 1px;
        right: -31px;
        width: 31px;
        /* margin: 0 auto 30px; */
        position: absolute;
        /* padding: 10px; */
        cursor: move;
      }

      #mydivheader4 {
        background-image: url(assets/img/2ipalt.png);
        background-repeat: no-repeat;
        z-index: 22;
        height: 65px;
        top: 676px;
        right: 0px;
        width: 345px;
        margin: 0 auto 30px;
        position: absolute;
        padding: 10px;
        pointer-events: none
      }
    </style>
  </head>



  <body class="c-app" onload="pageOnCreate()">
    <div id="mydiv" style="top: 160px; left: 300px;">

      <iframe src="https://qaft-c9c5e.web.app/" height="719" width="345" title="Iframe Example" style="border:none;background: #f2f2f2"></iframe>
      <div id="mydivheader"></div>
      <div id="mydivheader2"></div>
      <div id="mydivheader3"></div>
      <div id="mydivheader4"></div>
      <svg xmlns="http://www.w3.org/2000/svg" onclick="showAndHideEmulator()" width="48" height="48" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 16 16" style="    top: -43px;position: absolute;right: -80px;cursor:pointer">
        <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"></path>
        <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"></path>
      </svg>


      <svg xmlns="http://www.w3.org/2000/svg" onclick="emulatorRefreshButton()" width="48" height="48" fill="currentColor" class="bi bi-x-circle" viewBox="0 0 300 300" style="    top: 4px;position: absolute;right: -80px;cursor:pointer">
        <path d="M205.213,71.476c-16.726-12.747-36.71-19.484-57.792-19.484c-52.62,0-95.43,42.81-95.43,95.43s42.81,95.43,95.43,95.43   c25.49,0,49.455-9.926,67.479-27.951c2.343-2.343,2.343-6.142,0-8.485c-2.343-2.343-6.143-2.343-8.485,0   c-15.758,15.758-36.709,24.436-58.994,24.436c-46.003,0-83.43-37.426-83.43-83.43s37.426-83.43,83.43-83.43   c36.894,0,69.843,24.715,80.126,60.104c0.924,3.182,4.253,5.011,7.436,4.087c3.182-0.925,5.012-4.254,4.087-7.436   C233.422,101.308,221.398,83.809,205.213,71.476z"></path>
        <path d="M217.773,129.262c-2.344-2.343-6.143-2.343-8.485,0c-2.343,2.343-2.343,6.142,0,8.485l22.57,22.571   c1.125,1.125,2.651,1.757,4.243,1.757s3.118-0.632,4.243-1.757l22.57-22.571c2.343-2.343,2.343-6.142,0-8.485   c-2.344-2.343-6.143-2.343-8.485,0l-18.328,18.328L217.773,129.262z"></path>
      </svg>

    </div>

    <div class="c-sidebar c-sidebar-dark c-sidebar-fixed c-sidebar-lg-show" id="sidebar">
      <div class="c-sidebar-brand d-lg-down-none">
        <!--<svg class="c-sidebar-brand-full" width="118" height="46" alt="QAFT Logo">
        <use xlink:href="assets/brand/coreui.svg#full"></use>
      </svg>
      <svg class="c-sidebar-brand-minimized" width="46" height="46" alt="CoreUI Logo">
        <use xlink:href="assets/brand/coreui.svg#signet"></use>
      </svg>-->
        <img src="assets/img/qaftWT.png" alt="QAFT" width="90" height="46">
      </div>
      <ul class="c-sidebar-nav">
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="index.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-library"></use>
            </svg> Products
            <!--<span class="badge badge-info">NEW</span>-->
          </a></li>
        <!--<li class="c-sidebar-nav-title">CONTROL</li>-->
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="product.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-library-add"></use>
            </svg> Add Product</a></li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="collections.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-layers"></use>
            </svg> Collections</a></li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="categories.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-sitemap"></use>
            </svg> Categories Settings</a></li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="homeView.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-home"></use>
            </svg> Home View Settings</a></li>
        <li class="c-sidebar-nav-item"><a class="c-sidebar-nav-link" href="notifications.html">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bell"></use>
            </svg> Send Notifications</a></li>

        <li class="c-sidebar-nav-item mt-auto"><a class="c-sidebar-nav-link c-sidebar-nav-link-success" style="cursor: pointer;" onclick="showAndHideEmulator()" target="_top">
            <svg class="c-sidebar-nav-icon">
              <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-screen-smartphone"></use>
            </svg> Live test</a></li>
      </ul>
      <button class="c-sidebar-minimizer c-class-toggler" type="button" data-target="_parent" data-class="c-sidebar-minimized"></button>
    </div>
    <div class="c-wrapper c-fixed-components">
      <header class="c-header c-header-light c-header-fixed c-header-with-subheader">
        <button class="c-header-toggler c-class-toggler d-lg-none mfe-auto" type="button" data-target="#sidebar" data-class="c-sidebar-show">
          <svg class="c-icon c-icon-lg">
            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-menu"></use>
          </svg>
        </button><a class="c-header-brand d-lg-none" href="#">
          <img src="assets/img/qaftWT.png" alt="QAFT" width="90" height="46"></a>
        <div class="text-value-lg"></div>
        <button class="c-header-toggler c-class-toggler mfs-3 d-md-down-none" type="button" data-target="#sidebar" data-class="c-sidebar-lg-show" responsive="true">
          <svg class="c-icon c-icon-lg">
            <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-menu"></use>
          </svg>
        </button>
        <ul class="c-header-nav d-md-down-none">
          <li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="#">Dashboard</a></li>
          <!--<li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="#">Users</a></li>
        <li class="c-header-nav-item px-3"><a class="c-header-nav-link" href="#">Settings</a></li>-->
        </ul>
        <ul class="c-header-nav ml-auto mr-4">

          <!-- <li class="c-header-nav-item d-md-down-none mx-2"><a class="c-header-nav-link" href="#">
            <svg class="c-icon">
              <use xlink:href="node_modules/@coreui/icons/sprites/free.svg#cil-envelope-open"></use>
            </svg></a></li> -->
          <li class="c-header-nav-item dropdown"><a class="c-header-nav-link" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
              <div class="c-avatar"><img class="c-avatar-img" src="" alt="" id="userImageID"></div>
            </a>
            <div class="dropdown-menu dropdown-menu-right pt-0">
              <div class="dropdown-header bg-light py-2"><strong>Account</strong></div><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-bell"></use>
                </svg> Updates
                <!--<span class="badge badge-info ml-auto">42</span>-->
              </a><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-envelope-open"></use>
                </svg> Messages
                <!--<span class="badge badge-info ml-auto">42</span>-->
              </a><a class="dropdown-item" href="#">
              </a>
              <div class="dropdown-header bg-light py-2"><strong>Settings</strong></div><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-user"></use>
                </svg> Profile</a><a class="dropdown-item" href="#">
                <svg class="c-icon mr-2">
                  <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-settings"></use>
                </svg> Settings</a><a class="dropdown-item" href="#">
              </a>
              <div class="dropdown-divider"></div><a class="dropdown-item" href="#">
              </a>
              <div onclick="logout()"><a class="dropdown-item" href="#">
                  <svg class="c-icon mr-2">
                    <use xlink:href="vendors/@coreui/icons/svg/free.svg#cil-account-logout">
                    </use>
                  </svg> Logout
                </a>
              </div>
            </div>
          </li>
        </ul>


      </header>
      <div class="c-body">
        <main class="c-main">
          <div class="container-fluid">
            <div class="fade-in">


              <!-- Start row -->
              <div class="row">
                <!-- Start col -->
                <div class="col-lg-8 col-xl-9">
                  <div class="card m-b-30">
                    <div class="card-header">
                      <h5 class="card-title">Product Detail</h5>
                    </div>

                    <div class="card-body">
                      <form>
                        <div class="form-group row">
                          <label for="productTitle" class="col-sm-12 col-form-label">Product Name</label>
                          <div class="col-sm-12">
                            <input type="text" class="form-control font-20" id="productTitle" placeholder="Name">
                          </div>
                        </div>
                        <div class="form-group row">
                          <label class="col-sm-12 col-form-label">Description</label>
                          <div class="col-sm-12">
                            <textarea class="form-control" id="textarea-input" name="textarea-input" rows="5" placeholder="Description.."></textarea>
                          </div>
                        </div>
                        <div class="form-group row">
                          <label for="productTitleOUrl" class="col-sm-12 col-form-label">Original url</label>
                          <div class="col-sm-12">
                            <input type="text" class="form-control font-20" id="productTitleOUrl" placeholder="Url">
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>

                  <div class="row">

                    <div class="col-lg-12 col-xl-12">
                      <div class="card m-b-30">
                        <div class="card-header">
                          <h5 class="card-title">Product Images</h5>
                        </div>
                        <div class="card-body">
                          <div class="row">

                            <div class="card-body col-lg-6 col-xl-6">
                              <br>
                              <input class="form-control" id="imageUrlTextBox" type="text" placeholder="Enter image url">
                              <div class="col-6 col-sm-4 col-md-2 col-xl mb-3 mb-xl-0">
                                <br>
                                <button class="btn btn-block btn-secondary" type="button" onclick="addImage()">Add
                                  Image</button>
                                <button class="btn btn-block btn-secondary" type="button">Delete
                                  Image</button>
                              </div>

                            </div>
                            <div class="carousel slide col-lg-6 col-xl-6" id="carouselExampleIndicators" data-ride="carousel">
                              <ol class="carousel-indicators" id="imageSliderId">

                              </ol>
                              <div class="carousel-inner" id="imageSliderId_2" style="height: 100;">

                              </div><a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev"><span class="carousel-control-prev-icon" aria-hidden="true"></span><span class="sr-only">Previous</span></a><a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next"><span class="carousel-control-next-icon" aria-hidden="true"></span><span class="sr-only">Next</span></a>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- End col -->
                <!-- Start col -->
                <div class="col-lg-4 col-xl-3">

                  <div class="card m-b-30">
                    <div class="card-header">
                      <button class="btn btn-block btn-primary" type="button" onclick="publish()">Publish</button>
                    </div>

                  </div>

                  <div class="card m-b-30">
                    <div class="card-header">
                      <h5 class="card-title">Category</h5>
                    </div>
                    <div class="card-body pt-3">
                      <button class="btn btn-secondary dropdown-toggle" id="dropdownMenuButtonCat" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Category</button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="margin: 0px;" id="categoryDropdown">

                      </div>
                    </div>

                    <div class="card-body pt-3">
                      <button class="btn btn-secondary dropdown-toggle" id="dropdownMenuButtonSubCat" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Sub-Category</button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="margin: 0px;" id="SubCategoryDropdown">
                      </div>
                    </div>
                  </div>

                  <div class="card m-b-30">
                    <div class="card-header">
                      <h5 class="card-title">Sizes</h5>
                    </div>
                    <div class="card-body">
                      <div class="product-tags">
                        <div class="badge-list" id="sizeList">

                        </div>
                      </div>
                    </div>
                    <div class="card-body">
                      <div>
                        <h6 class="card-title">In-stock:</h6>
                        <div class="card-body" id="available_sizes_selection">


                        </div>
                      </div>
                    </div>
                    <div class="card-footer">
                      <div class="add-product-tags">

                        <div class="input-group">
                          <input type="search" class="form-control" placeholder="Add Sizes" aria-label="Search" aria-describedby="button-addonTags" id="textbox-addTags">
                          <div class="input-group-append">
                            <button class="input-group-text" onclick="addSizeTag()" id="button-addTags">Add</button>
                          </div>
                        </div>

                      </div>
                    </div>
                  </div>
                  <div class="card m-b-30">
                    <div class="card-header">
                      <h5 class="card-title">Product Image Gallery</h5>
                    </div>
                    <div class="card-body">
                      <div class="form-group row">
                        <div class="col-md-4">
                          <h7 class="card-title" style="white-space: nowrap;">Price</h7>

                        </div>
                        <div class="col-md-8">
                          <input class="form-control" type="text" placeholder="" id="priceTextBoxId">
                        </div>
                      </div>
                      <div class="form-group row">
                        <div class="col-md-4">
                          <h7 class="card-title" style="white-space: nowrap;">Old Price</h7>
                        </div>
                        <div class="col-md-8">
                          <input class="form-control" type="text" placeholder="" id="oldPriceTextBoxId">
                        </div>
                      </div>
                    </div>

                  </div>
                  <!-- End row -->
                </div>

                <!-- /.col-->
              </div>
              <!-- /.row-->
            </div>
          </div>
        </main>
        <footer class="c-footer">
          <div><a href="https://coreui.io">CoreUI</a> © 2020 creativeLabs.</div>
          <div class="ml-auto">Powered by&nbsp;<a href="https://coreui.io/">CoreUI</a></div>
        </footer>
      </div>
    </div>
    <!-- CoreUI and necessary plugins-->
    <script src="vendors/@coreui/coreui/js/coreui.bundle.min.js"></script>
    <!--[if IE]><!-->
    <script src="vendors/@coreui/icons/js/svgxuse.min.js"></script>
    <!--<![endif]-->
    <!-- Plugins and scripts required by this view-->
    <script src="vendors/@coreui/chartjs/js/coreui-chartjs.bundle.js"></script>
    <script src="vendors/@coreui/utils/js/coreui-utils.js"></script>
    <script src="js/main.js"></script>
    <script src="js/globals.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.3/firebase-firestore.js"></script>

    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyCpOsOj0vBMsT7hCvb8f9sEW_3jxDp_jOg",
        authDomain: "qaft-c9c5e.firebaseapp.com",
        projectId: "qaft-c9c5e",
        storageBucket: "qaft-c9c5e.appspot.com",
        messagingSenderId: "804490154290",
        appId: "1:804490154290:web:f5796a39e7cf9d7bc5472b",
        measurementId: "G-7NP0C30XXD"
      };

      // Initialize Firebase
      var defaultProject = firebase.initializeApp(firebaseConfig);


      const db = firebase.firestore()
      const auth = firebase.auth()

      var paginationCurrent = 1;
      var onePageItemCount = 20;

      var products = [];

      var sizes = [];

      var available_sizes = [];

      var images = [];


      var category_tree;
      var categories = [];
      var subCategories = [];
      var selected_category;
      var selected_subCategory;
      var editMode = false;


      function pageOnCreate() {

        if (!auth.currentUser) {
          //window.location.replace('login.html')
        }

        auth.onAuthStateChanged(function(user) {
          if (user) {

          } else {
            window.location.replace('login.html')
          }
        });

        db.collection('qaft').doc(sessionStorage.getItem('storeId')).collection('common').doc('category_tree').get().then((all) => {
          category_tree = all.data();
          var goInHtml = '';
          for (i in Object.keys(all.data())) {
            var template = `<a class="dropdown-item" onclick="setSubCats('${Object.keys(category_tree)[i]}')">${Object.keys(category_tree)[i]}</a>`;
            goInHtml = goInHtml + template;
          }
          document.getElementById('categoryDropdown').innerHTML = goInHtml;




          if (window.sessionStorage.getItem('editDataTemp').length > 0) {
            editMode = true;
            products = JSON.parse(window.sessionStorage.getItem('editDataTemp')) //not products!! -> product
            window.sessionStorage.setItem('editDataTemp', '')
            document.getElementById('productTitle').value = products['name']
            document.getElementById('textarea-input').value = products['description']
            document.getElementById('productTitleOUrl').value = products['originalUrl']
            document.getElementById('priceTextBoxId').value = products['price']
            document.getElementById('oldPriceTextBoxId').value = products['old_price']
            images = products['imageUrls']
            sizes = products['sizes']
            available_sizes = products['available_sizes']

            if (sizes.length > 0) {
              setAvailableSizeCard();
            }


            setSubCats(products['category'])
            selectSubCat(products['sub_category'])

            addSizeTag()

            setSlidenImages();
          }


        });




      }

      function setSubCats(category) {
        selected_category = category
        document.getElementById('dropdownMenuButtonCat').innerHTML = category
        document.getElementById('dropdownMenuButtonCat').classList.remove('btn-outline-danger')
        var goInHtml = '';
        for (i in category_tree[category]) {
          var template = `<a class="dropdown-item" onclick="selectSubCat('${category_tree[category][i]}')">${category_tree[category][i]}</a>`;
          goInHtml = goInHtml + template;
        }
        document.getElementById('SubCategoryDropdown').innerHTML = goInHtml;
      }

      function selectSubCat(subCat) {
        selected_subCategory = subCat;
        document.getElementById('dropdownMenuButtonSubCat').innerHTML = subCat
        document.getElementById('dropdownMenuButtonSubCat').classList.remove('btn-outline-danger')
      }



      function addSizeTag() {
        if (document.getElementById('textbox-addTags').value != '') {
          sizes.push(document.getElementById('textbox-addTags').value);
          available_sizes.push(document.getElementById('textbox-addTags').value);
          var tagElemnts = '';
          for (i = 0; i < sizes.length; i++) {
            tagElemnts = tagElemnts + `<a class="badge badge-light">${sizes[i]}</a>`
          }
          document.getElementById('sizeList').innerHTML = tagElemnts;
          document.getElementById('textbox-addTags').value = '';
        }


        setAvailableSizeCard();
      }

      function setAvailableSizeCard() {

        var avSzInHtml = '';
        for (i in sizes) {
          if (available_sizes.includes(sizes[i])) {
            var template = `<div class="custom-control custom-checkbox">
                                            <input type="checkbox" onclick="checkboxCheck('${i}')" class="custom-control-input" id="appliances_${i}" checked>
                                            <label class="custom-control-label" for="appliances_${i}" id="appliances_sub_${i}">${sizes[i]}</label>
                                        </div>`;
          } else {
            var template = `<div class="custom-control custom-checkbox">
                                            <input type="checkbox" onclick="checkboxCheck('${i}')" class="custom-control-input" id="appliances_${i}" >
                                            <label class="custom-control-label" for="appliances_${i}" id="appliances_sub_${i}">${sizes[i]}</label>
                                        </div>`;
          }

          avSzInHtml = avSzInHtml + template
        }

        document.getElementById('available_sizes_selection').innerHTML = avSzInHtml;

      }

      function addImage() {
        if (document.getElementById('imageUrlTextBox').value == '') {
          return;
        }
        images.push(document.getElementById('imageUrlTextBox').value);
        document.getElementById('imageUrlTextBox').value = ''
        setSlidenImages();
      }

      function setSlidenImages() {

        var imgsInHtml = '';
        var imgsInHtml2 = '';

        for (i in images) {

          if (i == 0) {
            var template1 = `<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>`;
            var template2 = `<div class="carousel-item active"><img class="d-block w-100" data-src="holder.js/800x400?auto=yes&amp;bg=777&amp;fg=555&amp;text=First slide" alt="First slide [800x400]" width="500" style="height:100%;" src="${images[i]}" data-holder-rendered="true"></div>`;
          } else {
            var template1 = `<li data-target="#carouselExampleIndicators" data-slide-to="0" class=""></li>`;
            var template2 = `<div class="carousel-item"><img class="d-block w-100" data-src="holder.js/800x400?auto=yes&amp;bg=777&amp;fg=555&amp;text=First slide" alt="First slide [800x400]" src="${images[i]}" data-holder-rendered="true"></div>`;
          }



          imgsInHtml = imgsInHtml + template1;
          imgsInHtml2 = imgsInHtml2 + template2;
        }

        document.getElementById('imageSliderId').innerHTML = imgsInHtml
        document.getElementById('imageSliderId_2').innerHTML = imgsInHtml2


      }

      function checkboxCheck(i) {

        if (document.getElementById('appliances_' + i).checked == true) {
          available_sizes.push(document.getElementById('appliances_sub_' + i).innerHTML)
        } else if (document.getElementById('appliances_' + i).checked == false) {

          for (j = 0; j < available_sizes.length; j++) {
            if (sizes[i] === available_sizes[j]) {
              available_sizes.splice(j, 1)
            }
          }
        }
      }

      function publish() {
        document.getElementById('productTitle').classList.remove("is-invalid");
        document.getElementById('productTitleOUrl').classList.remove("is-invalid");
        document.getElementById('dropdownMenuButtonCat').classList.remove("btn-outline-danger");
        document.getElementById('dropdownMenuButtonSubCat').classList.remove("btn-outline-danger");
        document.getElementById('priceTextBoxId').classList.remove("is-invalid");
        document.getElementById('oldPriceTextBoxId').classList.remove("is-invalid");

        var error = false

        var p_name = document.getElementById('productTitle').value

        if (p_name == '') {
          error = true
          document.getElementById('productTitle').classList.add("is-invalid");
        }

        var p_description = document.getElementById('textarea-input').value



        var p_originalUrl = document.getElementById('productTitleOUrl').value

        if (p_originalUrl == '') {
          error = true
          document.getElementById('productTitleOUrl').classList.add("is-invalid");
        }


        var p_images = images
        var p_category = selected_category

        if (p_category == null) {
          error = true
          document.getElementById('dropdownMenuButtonCat').classList.add("btn-outline-danger");
        }



        var p_subcategory = selected_subCategory

        if (p_subcategory == null) {
          error = true
          document.getElementById('dropdownMenuButtonSubCat').classList.add("btn-outline-danger");
        }

        var p_sizes = sizes
        var p_availableSizes = available_sizes



        var p_price = parseFloat(document.getElementById('priceTextBoxId').value)

        if (isNaN(p_price)) {
          error = true
          document.getElementById('priceTextBoxId').classList.add("is-invalid");
        }


        var p_oldPrice = parseInt(document.getElementById('oldPriceTextBoxId').value)

        if (isNaN(p_oldPrice)) {
          p_oldPrice = 0
        }



        //console.log('p_name -> ' + p_name + ' -> ' + typeof (p_name))
        //console.log('p_description -> ' + p_description + ' -> ' + typeof (p_description))
        //console.log('p_originalUrl -> ' + p_originalUrl + ' -> ' + typeof (p_originalUrl))
        //console.log('p_images -> ' + p_images + ' -> ' + typeof (p_images))
        //console.log('p_category -> ' + p_category + ' -> ' + typeof (p_category))
        //console.log('p_subcategory -> ' + p_subcategory + ' -> ' + typeof (p_subcategory))
        //console.log('p_sizes -> ' + p_sizes + ' -> ' + typeof (p_sizes))
        //console.log('p_availableSizes -> ' + p_availableSizes + ' -> ' + typeof (p_availableSizes))
        //console.log('p_price -> ' + p_price + ' -> ' + typeof (p_price))
        //console.log('p_oldPrice -> ' + p_oldPrice + ' -> ' + typeof (p_oldPrice))

        if (!error) {

          if (editMode) {
            db.collection('qaft').doc(sessionStorage.getItem('storeId')).collection('products').doc(products.id).set({
              available_sizes: p_availableSizes,
              category: p_category,
              sub_category: p_subcategory,
              description: p_description,
              imageUrls: p_images,
              name: p_name,
              old_price: p_oldPrice,
              price: p_price,
              sizes: p_sizes,
              collections: []
            }).then(() => {
              window.location.reload(false);
            })
          } else {
            db.collection('qaft').doc(sessionStorage.getItem('storeId')).collection('products').doc().set({
              available_sizes: p_availableSizes,
              category: p_category,
              sub_category: p_subcategory,
              description: p_description,
              imageUrls: p_images,
              name: p_name,
              old_price: p_oldPrice,
              price: p_price,
              sizes: p_sizes,
              collections: []
            }).then(() => {
              window.location.reload(false);
            })
          }
        }
      }

      function logout() {
        window.location.replace('login.html')
        auth.signOut().then(() => {
          window.location.replace('login.html')
        }).catch((error) => {
          window.location.replace('login.html')
        });

      }
    </script>
    <script>
      //Make the DIV element draggagle:
      dragElement(document.getElementById("mydiv"));

      function dragElement(elmnt) {
        var pos1 = 0,
          pos2 = 0,
          pos3 = 0,
          pos4 = 0;
        if (document.getElementById(elmnt.id + "header")) {
          /* if present, the header is where you move the DIV from:*/
          document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;

        } else {
          /* otherwise, move the DIV from anywhere inside the DIV:*/
          elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e = e || window.event;
          e.preventDefault();
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY;
          document.onmouseup = closeDragElement;
          // call a function whenever the cursor moves:
          document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
          e = e || window.event;
          e.preventDefault();
          // calculate the new cursor position:
          pos1 = pos3 - e.clientX;
          pos2 = pos4 - e.clientY;
          pos3 = e.clientX;
          pos4 = e.clientY;
          // set the element's new position:
          elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
          elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
          /* stop moving when mouse button is released:*/
          document.onmouseup = null;
          document.onmousemove = null;
        }
      }


      //Make the DIV element draggagle:
      dragElementRight(document.getElementById("mydiv"));

      function dragElementRight(elmnt) {
        var pos1 = 0,
          pos2 = 0,
          pos3 = 0,
          pos4 = 0;
        if (document.getElementById(elmnt.id + "header3")) {
          /* if present, the header is where you move the DIV from:*/
          document.getElementById(elmnt.id + "header3").onmousedown = dragMouseDown;

        } else {
          /* otherwise, move the DIV from anywhere inside the DIV:*/
          elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e = e || window.event;
          e.preventDefault();
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY;
          document.onmouseup = closeDragElement;
          // call a function whenever the cursor moves:
          document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
          e = e || window.event;
          e.preventDefault();
          // calculate the new cursor position:
          pos1 = pos3 - e.clientX;
          pos2 = pos4 - e.clientY;
          pos3 = e.clientX;
          pos4 = e.clientY;
          // set the element's new position:
          elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
          elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
          /* stop moving when mouse button is released:*/
          document.onmouseup = null;
          document.onmousemove = null;
        }
      }

      //Make the DIV element draggagle:
      dragElementBottom(document.getElementById("mydiv"));

      function dragElementBottom(elmnt) {
        var pos1 = 0,
          pos2 = 0,
          pos3 = 0,
          pos4 = 0;
        if (document.getElementById(elmnt.id + "header4")) {
          /* if present, the header is where you move the DIV from:*/
          document.getElementById(elmnt.id + "header4").onmousedown = dragMouseDown;

        } else {
          /* otherwise, move the DIV from anywhere inside the DIV:*/
          elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e = e || window.event;
          e.preventDefault();
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY;
          document.onmouseup = closeDragElement;
          // call a function whenever the cursor moves:
          document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
          e = e || window.event;
          e.preventDefault();
          // calculate the new cursor position:
          pos1 = pos3 - e.clientX;
          pos2 = pos4 - e.clientY;
          pos3 = e.clientX;
          pos4 = e.clientY;
          // set the element's new position:
          elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
          elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
          /* stop moving when mouse button is released:*/
          document.onmouseup = null;
          document.onmousemove = null;
        }
      }

      //Make the DIV element draggagle:
      dragElementLeft(document.getElementById("mydiv"));

      function dragElementLeft(elmnt) {
        var pos1 = 0,
          pos2 = 0,
          pos3 = 0,
          pos4 = 0;
        if (document.getElementById(elmnt.id + "header2")) {
          /* if present, the header is where you move the DIV from:*/
          document.getElementById(elmnt.id + "header2").onmousedown = dragMouseDown;

        } else {
          /* otherwise, move the DIV from anywhere inside the DIV:*/
          elmnt.onmousedown = dragMouseDown;
        }

        function dragMouseDown(e) {
          e = e || window.event;
          e.preventDefault();
          // get the mouse cursor position at startup:
          pos3 = e.clientX;
          pos4 = e.clientY;
          document.onmouseup = closeDragElement;
          // call a function whenever the cursor moves:
          document.onmousemove = elementDrag;
        }

        function elementDrag(e) {
          e = e || window.event;
          e.preventDefault();
          // calculate the new cursor position:
          pos1 = pos3 - e.clientX;
          pos2 = pos4 - e.clientY;
          pos3 = e.clientX;
          pos4 = e.clientY;
          // set the element's new position:
          elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
          elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
          /* stop moving when mouse button is released:*/
          document.onmouseup = null;
          document.onmousemove = null;
        }
      }
    </script>


  </body>
</html>